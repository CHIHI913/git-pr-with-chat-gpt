### GitHub PR with ChatGPT 拡張機能仕様書

#### 1. 概要

GitHub のプルリクエスト（PR）の差分とユーザーが入力したプロンプトを ChatGPT に送信する Chrome 拡張機能です。この拡張機能を使用することで、PR の内容を ChatGPT に送信し、レビューやコメントを得ることができます。

#### 2. 要件

##### 2.1 機能要件

- **プロンプト入力**

  - ユーザーはポップアップでプロンプトを入力できる。
  - プロンプトが保存されていない場合は、ヒントテキスト「プロンプトを登録してください」を表示する。

- **プロンプトの保存・管理**

  - ユーザーは最大 5 つのプロンプトを保存できる。
  - 保存済みのプロンプトは選択リストで表示され、25 文字を超える場合は「…」で省略される。
  - 保存済みのプロンプトを選択リストから選ぶと、テキストエリアに表示される。
  - プロンプトを保存する際、同じプロンプトが存在する場合は上書き保存される。
  - プロンプトを削除することができる。

- **PR 差分の取得**

  - 現在アクティブなタブの GitHub PR ページから PR の差分を取得する。
  - 取得した差分をポップアップに表示する。
  - 差分は追加された行を緑色、削除された行を赤色で表示する。

- **ChatGPT への送信**
  - 「ChatGPT を開く」ボタンを押すと、プロンプトと PR 差分を組み合わせたテキストを ChatGPT に送信する。
  - ChatGPT のブラウザが開き、テキストフィールドにプロンプトと PR 差分が入力され、送信ボタンが自動で押される。

##### 2.2 非機能要件

- **ユーザビリティ**
  - ポップアップ内の UI はシンプルで直感的に操作できる。
  - 「ChatGPT を開く」ボタンはポップアップの一番上に表示する。
  - 保存済みのプロンプトが存在する場合は、最初からそのプロンプトを表示する。
  - 保存済みのプロンプトが存在しない場合は、ヒントテキストを表示する。
  - ボタンや入力フィールドのデザインは直感的で見やすいスタイルにする。

#### 3. 仕様変更履歴

- **バージョン 1.0**:
  - 初期リリース。
- **バージョン 1.1**:
  - 保存済みのプロンプト機能を追加。
  - 保存済みプロンプトの選択リストを追加し、プロンプトの管理を容易にした。
  - プロンプトが保存されていない場合のヒントテキストを追加。
  - プロンプトを削除できる機能を追加。
  - UI デザインを改善し、ボタンのスタイルを更新。
  - 差分の表示方法を改善し、追加行と削除行の色分けを追加。
